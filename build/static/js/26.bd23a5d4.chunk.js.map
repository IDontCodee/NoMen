{"version":3,"file":"static/js/26.bd23a5d4.chunk.js","mappings":"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","sources":["pages/chatbox.js","util.js","../node_modules/@mui/icons-material/Refresh.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"],"sourcesContent":["/* global __sussy$ */\r\nimport React from \"react\";\r\nimport Nav from \"../components/nav.js\";\r\nimport Head from \"../components/head.js\";\r\nimport { getLink } from \"../util.js\";\r\n\r\nimport { useQuery, gql } from '@apollo/client';\r\n\r\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\r\nimport \"../style/controls.css\";\r\n\r\nvar Proxy = React.forwardRef((props, ref) => {\r\n  var web = React.createRef();\r\n  var [config, setConfig] = React.useState();\r\n  // config.preferControl\r\n  React.useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      open: (config) => {\r\n        document.body.style.overflow = \"hidden\";\r\n        setConfig({\r\n          url: config.url\r\n        });\r\n      }\r\n    })\r\n  );\r\n\r\n  document.getElementsByTagName(\"body\")[0].setAttribute(\"controls\", \"classic\"); // force controls\r\n  if(!config) return;\r\n  return (\r\n    <>\r\n      <div className=\"controls\">\r\n        <div\r\n          className=\"controlsButton\"\r\n          style={{ top: \"70px\", position: \"fixed\" }}\r\n          onClick={() => {\r\n            try {\r\n              web.current.contentWindow.location.reload();\r\n            } catch (err) {}\r\n          }}\r\n        >\r\n          <RefreshIcon />\r\n        </div>\r\n      </div>\r\n      <iframe\r\n        ref={web}\r\n        className=\"chatbox\"\r\n        src={config.url}\r\n      ></iframe>\r\n    </>\r\n  );\r\n});\r\n\r\nfunction Chatbox() {\r\n  let { data } = useQuery(gql`\r\n  query URIconfig {\r\n    URIconfig {\r\n      WD\r\n    }\r\n  }\r\n  `);\r\n  var proxy = React.useRef();\r\n  try {\r\n    if(data) proxy.current.open({ url: getLink(data.URIconfig.WD) });\r\n  } catch(err) {\r\n    console.warn('Could not load chatbox');\r\n    console.warn(err);\r\n    alert('There was a error loading the chatbox. Try again in a couple seconds.');\r\n  };\r\n  return (\r\n    <>\r\n      <Head defaultTitle=\"Chatbox | sussy\"></Head>\r\n      <Nav />\r\n      <Proxy ref={proxy} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Chatbox;","/*global __uv$config, __sussy$config */\r\nimport { stomp, swSupported } from \"./proxy.js\";\r\n\r\nexport function getSearchEngine() {\r\n  var engine = localStorage.getItem(\"engine\");\r\n\r\n  switch (engine) {\r\n    case \"Brave\":\r\n      return \"https://search.brave.com/search?q=\";\r\n    case \"Google\":\r\n      return \"https://www.google.com/search?a=\";\r\n    default:\r\n      case \"DuckDuckGo\":\r\n        return \"https://duckduckgo.com/?q=\";\r\n  }\r\n}\r\n\r\nfunction searchURL(url) {\r\n  if (url.match(/^https?:\\/\\//)) {\r\n    return url;\r\n  } else if (url.includes(\".\") && !url.includes(\" \")) {\r\n    return \"https://\" + url;\r\n  } else {\r\n    return getSearchEngine() + encodeURIComponent(url);\r\n  }\r\n}\r\n\r\nexport function getLink(url, morestuff) {\r\n  if(morestuff) return (__sussy$config?.moreStuffURI || \"example.com\")\r\n  if(url.startsWith('/')) return url; // A local file\r\n  var type = localStorage.getItem(\"type\") || \"Ultraviolet\";\r\n  if (!swSupported && type !== \"Corrosion\")\r\n    throw new Error(\"Your browser doesn't support service workers.\");\r\n\r\n  url = searchURL(url)\r\n\r\n  switch (type) {\r\n    case \"Stomp\":\r\n      return new URL(stomp.html(url), global.location).toString();\r\n    case \"Corrosion\":\r\n      return new URL(\r\n        __uv$config.encodeUrl(url),\r\n        new URL(__sussy$config._co, global.location)\r\n      ).toString();\r\n    default:\r\n    case \"Rhodium\":\r\n      return new URL(__uv$config.encodeUrl(url), new URL(__sussy$config._rho, global.location))\r\n    case \"Ultraviolet\":\r\n      return \"/data-load-uv.html#\" + btoa(url);\r\n  }\r\n}\r\n\r\nexport function getWindowLocation(page) {\r\n  var [type] = localStorage.getItem(\"type\") || \"Ultraviolet\";\r\n\r\n  var pageURL = page.contentWindow.location.toString();\r\n\r\n  try {\r\n    switch (type) {\r\n      case \"Ultraviolet\":\r\n        pageURL = page.contentWindow.__uv$location.toString();\r\n        break;\r\n      case \"Stomp\":\r\n        pageURL = page.contentWindow.tc$.access\r\n          .get2(page.contentWindow, \"location\", \"(window.location)\")\r\n          .toString();\r\n      break;\r\n      case \"Corrosion\":\r\n        pageURL = page.contentWindow.location.toString();\r\n      break;\r\n      case \"Rhodium\":\r\n        pageURL = page.contentWindow.location.toString();\r\n        break;\r\n      default:\r\n        pageURL = page.contentWindow.__uv$location.toString();\r\n      break;\r\n    }\r\n  } catch(err) {}\r\n  return pageURL;\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\nexports.default = _default;","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}"],"names":["Proxy","React","props","ref","web","config","setConfig","open","document","body","style","overflow","url","getElementsByTagName","setAttribute","className","top","position","onClick","current","contentWindow","location","reload","err","src","data","useQuery","gql","proxy","getLink","URIconfig","WD","console","warn","alert","defaultTitle","searchURL","match","includes","localStorage","getItem","getSearchEngine","encodeURIComponent","morestuff","__sussy$config","moreStuffURI","startsWith","type","swSupported","Error","URL","stomp","global","toString","__uv$config","encodeUrl","_co","_rho","btoa","getWindowLocation","page","pageURL","__uv$location","tc$","access","get2","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value"],"sourceRoot":""}