{"version":3,"file":"static/js/568.5f3f5ab5.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/proxy.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","pages/home.js","util.js","../node_modules/@mui/icons-material/Close.js","../node_modules/@mui/icons-material/Fullscreen.js","../node_modules/@mui/icons-material/Public.js","../node_modules/@mui/icons-material/Refresh.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"],"sourcesContent":["import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","import { bareServerURL } from \"../consts.js\";\r\nimport React, { useEffect } from \"react\";\r\nimport PublicIcon from \"@mui/icons-material/Public\";\r\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\r\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { getWindowLocation } from \"../util.js\";\r\nimport \"../style/controls.css\";\r\nimport BareClient from \"@tomphttp/bare-client\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport { CollectionsOutlined } from \"@mui/icons-material\";\r\n\r\n/**\r\n * Return a blob URL to a working icon. Returns undefined if none work.\r\n * @param {BareClient} bare\r\n * @param {string[]} list List of absolute URLs to icons\r\n * @returns {string|undefined}\r\n */\r\nasync function workingIcon(bare, list) {\r\n  for (var urlstring of list)\r\n    try {\r\n      const url = new URL(urlstring);\r\n      var res;\r\n      if(url.origin == window.location.origin) res = await fetch(urlstring); else res = await bare.fetch(urlstring); // local file, don't use proxy\r\n      if (!res.ok) continue;\r\n      const blob = await res.blob();\r\n      if(blob.type.split(\";\")[0] == \"text/html;\") return; // WE DON'T WANT HTML FILES\r\n      return URL.createObjectURL(blob);\r\n    } catch (err) {\r\n      console.warn('There was a error while updating the (working) icon:');\r\n      console.error(err);\r\n    }\r\n}\r\n\r\n/**\r\n * Loads an image. If the image src is a blob, the blob will be revoked upon dismount.\r\n */\r\nfunction BareIcon({ src, ...attributes }) {\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (src.startsWith(\"blob:\")) {\r\n        URL.revokeObjectURL(src);\r\n        console.log(\"revoked\", src);\r\n      }\r\n    };\r\n  }, [src]);\r\n\r\n  // eslint-disable-next-line\r\n  return <img src={src} {...attributes} />;\r\n}\r\n\r\nvar Proxy = React.forwardRef(({ overrideWindow }, ref) => {\r\n  var bare = React.useMemo(() => new BareClient(bareServerURL), []);\r\n  var web = React.createRef();\r\n  var [config, setConfig] = React.useState();\r\n  var [searchParams, setSearchParams] = useSearchParams();\r\n  // config.preferControl\r\n  React.useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      open: (config) => {\r\n        document.body.style.overflow = \"hidden\";\r\n        searchParams.set(\"fr\", \"\");\r\n        setSearchParams(searchParams);\r\n        setConfig({\r\n          url: config.url,\r\n          title: null,\r\n          icon: null\r\n        });\r\n        setConfig(config);\r\n      }\r\n    }),\r\n    [overrideWindow, searchParams, setSearchParams]\r\n  );\r\n\r\n  function close() {\r\n    document.body.style.overflow = \"\";\r\n    setConfig();\r\n  }\r\n\r\n  // close frame when ?frame removed (user went back in history)\r\n  useEffect(() => {\r\n    if (!searchParams.has(\"fr\")) close();\r\n  }, [searchParams]);\r\n\r\n  if (!config) return;\r\n  if(config?.controls) document.getElementsByTagName(\"body\")[0].setAttribute(\"controls\", config.controls);\r\n  return (\r\n    <>\r\n      <div className=\"controls\">\r\n        <div className=\"controlsIcon\">\r\n          {config.icon ? (\r\n            <BareIcon src={config.icon} alt=\"Website\" />\r\n          ) : (\r\n            <PublicIcon fontSize=\"large\" />\r\n          )}\r\n        </div>\r\n        <div className=\"controlsTitle\">{config.title || \"Loading...\"}</div>\r\n        <div\r\n          className=\"controlsButton\"\r\n          onClick={() => {\r\n            web.current.requestFullscreen();\r\n          }}\r\n        >\r\n          <FullscreenIcon />\r\n        </div>\r\n        <div\r\n          className=\"controlsButton\"\r\n          onClick={() => {\r\n            try {\r\n              web.current.contentWindow.location.reload();\r\n            } catch (err) {\r\n              //\r\n            }\r\n          }}\r\n        >\r\n          <RefreshIcon />\r\n        </div>\r\n        <div className=\"controlsButton\" onClick={close}>\r\n          <CloseIcon />\r\n        </div>\r\n      </div>\r\n      <iframe\r\n      tabIndex={1}\r\n        onLoad={async () => {\r\n          var updatedConfig = {\r\n            url: config.url,\r\n          };\r\n\r\n          updatedConfig.title =\r\n            web.current.contentWindow.document.title ||\r\n            getWindowLocation(web.current);\r\n\r\n          var icon = web.current.contentWindow.document.querySelector(\r\n            \"link[rel*='icon'],link[rel='shortcut icon']\"\r\n          );\r\n\r\n          updatedConfig.icon = await workingIcon(\r\n            bare,\r\n            [\r\n              icon && icon.href,\r\n              new URL(\r\n                \"/favicon.ico\",\r\n                web.current.contentWindow.document.baseURI\r\n              ).toString(),\r\n            ].filter(Boolean)\r\n          );\r\n\r\n          setConfig(updatedConfig);\r\n        }}\r\n        ref={web}\r\n        className=\"web\"\r\n        src={config.url}\r\n        title=\"Website\"\r\n      ></iframe>\r\n    </>\r\n  );\r\n});\r\n\r\nexport { Proxy as default };\r\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","/*global __sussy$ */\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Nav from \"../components/nav.js\";\r\nimport Head from \"../components/head.js\";\r\nimport Proxy from \"../components/proxy.js\";\r\nimport BareClient from \"@tomphttp/bare-client\";\r\nimport { bareServerURL } from \"../consts.js\";\r\nimport { getLink } from \"../util.js\";\r\n\r\nimport { useQuery, gql } from '@apollo/client';\r\n\r\nfunction Home() {\r\n  let { data } = useQuery(gql`\r\n  query URIconfig {\r\n    URIconfig {\r\n      DC\r\n    }\r\n  }\r\n  `);\r\n\r\n  function loadDC() {\r\n    window.open(data.URIconfig.DC, '_blank');\r\n  };\r\n  \r\n  var proxy = React.useRef();\r\n\r\n  var [suggestions, setSuggestions] = React.useState([]);\r\n\r\n  const bare = React.useMemo(() => new BareClient(bareServerURL), []);\r\n\r\n  var omniboxcontainer = React.useRef();\r\n\r\n  var suggestionsChildren = React.useRef();\r\n\r\n  var omnibox = React.useRef();\r\n\r\n  function showOmnibox() {\r\n    if (!omniboxcontainer.current) return;\r\n\r\n    if (!omniboxcontainer.current.hasAttribute(\"open\")) {\r\n      omniboxcontainer.current.setAttribute(\"open\", \"\");\r\n    }\r\n  }\r\n\r\n  function hideOmnibox() {\r\n    if (!omniboxcontainer.current) return;\r\n\r\n    if (omniboxcontainer.current.hasAttribute(\"open\")) {\r\n      omniboxcontainer.current.removeAttribute(\"open\");\r\n    }\r\n  }\r\n\r\n  async function updateOmnibox(query) {\r\n    let results = [];\r\n\r\n    try {\r\n      var site = await bare.fetch(\"https://duckduckgo.com/ac/?q=\" + query + \"&type=list\");\r\n      results = await site.json();\r\n      results = await results[1];\r\n    } catch (err) {\r\n      console.warn('There was a error while updating the omnibox:');\r\n      console.error(err);\r\n      results = [];\r\n    }\r\n    setSuggestions(results);\r\n    if (suggestionsChildren.current.children.length === 0) {\r\n      hideOmnibox();\r\n    } else {\r\n      showOmnibox();\r\n    }\r\n  }\r\n\r\n  function submit(value) {\r\n    try {\r\n      proxy.current.open({ url: getLink(value) });\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.toString());\r\n    }\r\n  }\r\n\r\n  async function searchType(e) {  \r\n    if (e.key === \"Enter\") return submit(e.target.value);\r\n\r\n    if (e.target.value && e.target.value !== \"\") {\r\n      updateOmnibox(e.target.value);\r\n      showOmnibox();\r\n    } else {\r\n      hideOmnibox();\r\n      setSuggestions([]);\r\n    }\r\n  }\r\n\r\n  window.addEventListener(\"click\", function (e) {\r\n    if (!omniboxcontainer.current) return;\r\n\r\n    if (\r\n      e.target.className !== \"omnibox\" &&\r\n      e.target.className !== \"search\" &&\r\n      e.target.className !== \"searchicon\" &&\r\n      e.target.className !== \"suggestions\" &&\r\n      e.target.className !== \"sugg\"\r\n    ) {\r\n      if (omniboxcontainer.current.hasAttribute(\"open\")) {\r\n        hideOmnibox();\r\n        setSuggestions([]);\r\n      }\r\n    } else {\r\n      if (e.target.value && e.target.value !== \"\") {\r\n        updateOmnibox(e.target.value);\r\n        showOmnibox();\r\n      } else {\r\n        hideOmnibox();\r\n        setSuggestions([]);\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Head defaultTitle=\"sussy\"></Head>\r\n      <Proxy ref={proxy} />\r\n      <Nav />\r\n      <div className=\"hometitle\">\r\n        sussy\r\n      </div>\r\n      <div ref={omniboxcontainer} className=\"omniboxcontainer\">\r\n        <div ref={omnibox} className=\"omnibox\">\r\n          <div className=\"searchicon\">\r\n            <svg\r\n              focusable=\"false\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path d=\"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path>\r\n            </svg>\r\n          </div>\r\n          <input\r\n            onKeyUp={searchType}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            id=\"search\"\r\n            className=\"search\"\r\n            placeholder=\"Search or Type URL\"\r\n          />\r\n        </div>\r\n        <div ref={suggestionsChildren} className=\"suggestions\">\r\n          {suggestions.map((item, i) => (\r\n            <div\r\n              key={i}\r\n              className=\"sugg\"\r\n              onClick={(e) => submit(e.target.textContent)}\r\n              dangerouslySetInnerHTML={{ __html: item }}\r\n            ></div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"iconFooter\">\r\n        <div className=\"icons\">\r\n            <a className=\"icon\" onClick={__sussy$.loadGC}><i className=\"fab fa-google\"></i></a>\r\n            <a className=\"icon\" onClick={loadDC}><i className=\"fab fa-discord\"></i></a>\r\n        </div>\r\n      </div>\r\n      <div className=\"footer\">\r\n        <div className=\"footermiddle\">\r\n        </div>\r\n        <div>\r\n        <Link className=\"footersides link\" to=\"/support\">FAQ</Link>\r\n        <Link className=\"footersides link\" to=\"/credits\">Credits</Link>\r\n        <a className=\"footersides\">Sus Network 2022 - {new Date().getFullYear()}</a>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;","/*global __uv$config, __sussy$config */\r\nimport { stomp, swSupported } from \"./proxy.js\";\r\n\r\nexport function getSearchEngine() {\r\n  var engine = localStorage.getItem(\"engine\");\r\n\r\n  switch (engine) {\r\n    case \"Brave\":\r\n      return \"https://search.brave.com/search?q=\";\r\n    case \"Google\":\r\n      return \"https://www.google.com/search?a=\";\r\n    default:\r\n      case \"DuckDuckGo\":\r\n        return \"https://duckduckgo.com/?q=\";\r\n  }\r\n}\r\n\r\nfunction searchURL(url) {\r\n  if (url.match(/^https?:\\/\\//)) {\r\n    return url;\r\n  } else if (url.includes(\".\") && !url.includes(\" \")) {\r\n    return \"https://\" + url;\r\n  } else {\r\n    return getSearchEngine() + encodeURIComponent(url);\r\n  }\r\n}\r\n\r\nexport function getLink(url, morestuff) {\r\n  if(morestuff) return (__sussy$config?.moreStuffURI || \"example.com\")\r\n  if(url.startsWith('/')) return url; // A local file\r\n  var type = localStorage.getItem(\"type\") || \"Ultraviolet\";\r\n  if (!swSupported && type !== \"Corrosion\")\r\n    throw new Error(\"Your browser doesn't support service workers.\");\r\n\r\n  url = searchURL(url)\r\n\r\n  switch (type) {\r\n    case \"Stomp\":\r\n      return new URL(stomp.html(url), global.location).toString();\r\n    case \"Corrosion\":\r\n      return new URL(\r\n        __uv$config.encodeUrl(url),\r\n        new URL(__sussy$config._co, global.location)\r\n      ).toString();\r\n    default:\r\n    case \"Rhodium\":\r\n      return new URL(__uv$config.encodeUrl(url), new URL(__sussy$config._rho, global.location))\r\n    case \"Ultraviolet\":\r\n      return \"/data-load-uv.html#\" + btoa(url);\r\n  }\r\n}\r\n\r\nexport function getWindowLocation(page) {\r\n  var [type] = localStorage.getItem(\"type\") || \"Ultraviolet\";\r\n\r\n  var pageURL = page.contentWindow.location.toString();\r\n\r\n  try {\r\n    switch (type) {\r\n      case \"Ultraviolet\":\r\n        pageURL = page.contentWindow.__uv$location.toString();\r\n        break;\r\n      case \"Stomp\":\r\n        pageURL = page.contentWindow.tc$.access\r\n          .get2(page.contentWindow, \"location\", \"(window.location)\")\r\n          .toString();\r\n      break;\r\n      case \"Corrosion\":\r\n        pageURL = page.contentWindow.location.toString();\r\n      break;\r\n      case \"Rhodium\":\r\n        pageURL = page.contentWindow.location.toString();\r\n        break;\r\n      default:\r\n        pageURL = page.contentWindow.__uv$location.toString();\r\n      break;\r\n    }\r\n  } catch(err) {}\r\n  return pageURL;\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n}), 'Fullscreen');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\"\n}), 'Public');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\nexports.default = _default;","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","workingIcon","bare","list","urlstring","URL","origin","window","location","fetch","res","ok","blob","type","split","createObjectURL","console","warn","error","BareIcon","src","attributes","source","excluded","key","i","target","objectWithoutPropertiesLoose","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","React","startsWith","revokeObjectURL","log","arguments","forEach","defineProperty","getOwnPropertyDescriptors","defineProperties","Proxy","ref","overrideWindow","BareClient","bareServerURL","web","config","setConfig","useSearchParams","searchParams","setSearchParams","close","document","body","style","overflow","open","set","url","title","icon","useEffect","has","controls","getElementsByTagName","setAttribute","className","alt","Public","fontSize","onClick","current","requestFullscreen","Fullscreen","contentWindow","reload","err","Refresh","Close","tabIndex","onLoad","updatedConfig","getWindowLocation","querySelector","href","baseURI","toString","Boolean","data","useQuery","gql","proxy","suggestions","setSuggestions","omniboxcontainer","suggestionsChildren","omnibox","showOmnibox","hasAttribute","hideOmnibox","removeAttribute","updateOmnibox","query","results","site","json","children","submit","value","getLink","alert","e","addEventListener","defaultTitle","focusable","xmlns","viewBox","d","onKeyUp","autoComplete","autoFocus","id","placeholder","map","item","textContent","dangerouslySetInnerHTML","__html","__sussy$","loadGC","URIconfig","DC","to","Date","getFullYear","searchURL","match","includes","localStorage","getItem","getSearchEngine","encodeURIComponent","morestuff","__sussy$config","moreStuffURI","swSupported","Error","stomp","global","__uv$config","encodeUrl","_co","_rho","btoa","page","pageURL","__uv$location","tc$","access","get2","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","_taggedTemplateLiteral","strings","raw","slice","freeze"],"sourceRoot":""}